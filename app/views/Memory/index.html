<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Memory Game</title>
  
  <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/main-16px.css'}">
       
  <script src="@{'/public/javascripts/jquery-1.5.2.min.js'}"
    type="text/javascript" charset="utf-8"></script>  
  
  <script src="@{'/public/javascripts/memory-0.1.js'}"
    type="text/javascript" charset="utf-8"></script>
  
  <script type="text/javascript">
  
  	
  	function toggleDialog() {
        
  	  	var thanks  = $("#thanks");
  	  	if (thanks.is(":visible")) {
  	  	  thanks.hide();
  	  	} else {
  	  	  thanks.show();
  	  	}
  	  	
  	}
  
    $(document).ready( function() {
      sortIt.start(${setId});
      
      $("#thanks-inner").click( function() {
        sortIt.resume();
        toggleDialog();
      });
      
      $("button").click( function() {
        
        if (sortIt.progress() >= 10) {
          toggleDialog();
        }
      })
    });
  </script>

</head>
<body>

<div id="wrapper">
  <header>
    <h1>SortIt</h1>
    <h3>Train your Memory</h3>
    <p>Have a look at the faces and answer: Older?</p>  
  </header>
  
  <div id="thanks">
    <div id="thanks-inner">
        Thank you very much for playing.<br/>
        You can now see the <a href="@{DataSets.elements(setName)}">result</a> of your and others work<br/>
        Of course you can just keep playing. The more the better ;-)<br/>
        Maybe you want to <a href="javascript:share()">share</a>. would be very nice..
     </div>
  </div>
  
  <div id="content">
    
    <div id="image-outer">
      <!-- loaded by js -->
      <img id="image"></img>
    </div>
    
    
    <div id="button-outer">
        <button id="yes" onclick="sortIt.yes();">Yes</button>
        <button id="no" onclick="sortIt.no();">No</button>
        <button id="skip" onclick="sortIt.next();">Skip</button>
    </div>
   
  
  </div>
  <footer>
    <div class="footer-inner">
      <span class="small">
       Social Computing Project. Rashmi Bakshi, CÃ©dric Reginster. 2011. 
      </span> 
    </div>
  </footer>
</div>

<!-- FB stuff -->
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '${play.configuration.getProperty("fb.api_key")}', // App ID
      channelUrl : '', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : false  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
  
  function share() {

    FB.ui({
      method : 'feed',
      link : "&{'feed_link'}",
      picture : "@@{'/public/images/'}/&{'feed_picture'}",
      name : "&{'feed_name'}",
      caption : "&{'feed_caption'}",
      description : "&{'feed_description'}"
    });
  }
</script>




</body>
</html>